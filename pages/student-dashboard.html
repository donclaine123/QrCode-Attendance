<!DOCTYPE html>
<html lang="en">

<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Student Dashboard - EazyAttend</title>
  <link rel="stylesheet" href="../css/student-dashboard.css">
  <script src="https://cdn.jsdelivr.net/npm/jsqr@1.4.0/dist/jsQR.min.js"></script>
  <link rel="icon" href="data:," />
</head>

<body>
  <div class="dashboard">
    <!-- Sidebar -->
    <aside class="sidebar">
      <div class="school-info">
        <img src="../assets/logo.png" alt="Logo" class="sidebar-logo-image">
        <div class="sidebar-app-name">EazyAttend</div>
      </div>

      <nav>
        <ul class="nav-menu">
          <li class="nav-item">
            <a href="#" class="nav-link active" id="nav-scan">
              <span class="nav-icon">📷</span>
              Scan QR
            </a>
          </li>
          <li class="nav-item">
            <a href="#" class="nav-link" id="nav-attendance">
              <span class="nav-icon">📚</span>
              Attendance
            </a>
          </li>
          <li class="nav-item">
            <a href="#" class="nav-link" id="nav-profile">
              <span class="nav-icon">👤</span>
              Profile
            </a>
          </li>
          <li class="nav-item">
            <a href="../index.html" class="nav-link">
              <span class="nav-icon">🏠</span>
              Home
            </a>
          </li>
          <li class="nav-item">
            <a href="#" class="nav-link" id="logout-btn">
              <span class="nav-icon">🚪</span>
              Logout
            </a>
          </li>
        </ul>
      </nav>
    </aside>

    <!-- Mobile Menu Overlay -->
    <div id="mobile-menu-overlay" class="mobile-menu-overlay"></div>
    <!-- End Mobile Menu Overlay -->

    <!-- Main Content -->
    <main class="main-content">
      <!-- Mobile Menu Toggle Button -->
      <button id="mobile-menu-toggle" class="mobile-menu-btn">&#9776;</button> 
      <!-- End Mobile Menu Toggle Button -->

      <div class="content-header">
        <h1 class="page-title">Student Dashboard</h1>
        <div id="welcome-message"></div>
      </div>

      <div id="student-section" style="display: none;">
        <!-- QR Scanner Section -->
        <section id="qr-scanner-section" class="dashboard-section" style="display: none;">
          <h3>Scan QR Code for Attendance</h3>
          <div class="video-container">
            <video id="video" autoplay playsinline></video>
            <canvas id="canvas" style="display: none;"></canvas>
            <div id="scannerBox"></div>
          </div>
          <div id="scanStatus"></div>
          <div id="scan-result"></div>
          <div class="scan-controls">
            <button id="startScanBtn" class="action-button">
              <span class="btn-icon">📷</span>
              Start Scanner
            </button>
          </div>
        </section>

        <!-- Dashboard Actions -->
        <div class="dashboard-actions" style="text-align: center; margin-bottom: 20px;">
          <button id="scan-qr-btn" class="btn btn-primary">
            <span class="btn-icon">📷</span>
            Scan QR Code
          </button>
        </div>

        <!-- Attendance Records Section -->
        <section id="attendance-section" class="dashboard-section">
          <div class="section-header">
            <h3 class="section-title">Your Attendance Records</h3>
          </div>
          <div id="attendance-records"></div>
        </section>
      </div>

      <!-- Profile Section -->
      <section id="profile-section" class="dashboard-section profile-container" style="display: none;">
        <div class="profile-header"></div>
        <div class="profile-picture">
          <span class="profile-icon">👤</span> <!-- Placeholder Icon -->
        </div>

        <h3>Your Profile</h3>
        <form id="profile-form">
          <div id="profile-message" style="margin-bottom: var(--spacing-md);"></div>
          <div class="form-group">
            <label for="profile-student-id">Student ID</label>
            <input type="text" id="profile-student-id" class="input-field" readonly disabled>
            <small>Student ID cannot be changed.</small>
          </div>
          <div class="form-group">
            <label for="profile-first-name">First Name</label>
            <input type="text" id="profile-first-name" name="firstName" class="input-field" required>
          </div>
          <div class="form-group">
            <label for="profile-last-name">Last Name</label>
            <input type="text" id="profile-last-name" name="lastName" class="input-field" required>
          </div>
          <div class="form-actions">
            <button type="submit" id="save-profile-btn" class="btn btn-primary">
              <span class="btn-icon">💾</span> <!-- Save Icon -->
              Save Changes
            </button>
          </div>
        </form>
      </section>
      <!-- End Profile Section -->

      <!-- Debug Section (hidden by default in CSS) -->
      <div id="debug-section">
        <h4>Debug Information</h4>
        <button id="test-cookies-btn">Test Cookies</button>
        <button id="check-auth-btn">Check Auth</button>
      </div>
    </main>

    <!-- Status Modal -->
    <div id="status-modal-overlay" class="modal-overlay">
      <div id="status-modal-content" class="modal-content">
        <div id="status-modal-icon-container"></div>
        <p id="status-modal-message"></p>
      </div>
    </div>
    <!-- End Status Modal -->

  </div>

  <script src="../js/config.js"></script>
  <script src="../js/student-dashboard.js"></script>
  <script src="../js/scanner.js"></script>
</body>

</html>